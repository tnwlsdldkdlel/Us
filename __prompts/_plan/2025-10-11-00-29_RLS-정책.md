# Supabase RLS 정책 설계

## Todo
- [x] 테이블별 접근 요구사항 정의
- [x] 정책 SQL 설계 및 적용
- [x] 적용 결과 검증 및 문서화

## Plan
1. Users/Friendships/Appointments/AppointmentParticipants/Comments 테이블 각각에 필요한 SELECT/INSERT/UPDATE/DELETE 권한 조건을 정리한다.
2. RLS를 활성화하고, 각 상황에 맞는 `auth.uid()` 기반 정책을 작성한다.
3. Supabase MCP `apply_migration`으로 정책을 생성하고, `list_tables`로 rls 활성 여부를 확인한다.
4. 작업 로그 업데이트 및 사용자 안내 내용을 준비한다.

## Working
- 논리적 FK 관계를 활용해 참여자/주최자 검사 쿼리 작성
- 각 테이블에 RLS 활성화 및 정책 생성, 재실행을 고려해 `drop policy if exists` 추가
- 정책 적용 후 테이블별 `rls_enabled` 상태 확인

## Result
- 5개 테이블 모두 RLS 활성화, 역할별 정책 적용 완료
- 주최자/참여자/작성자 기준으로 Select·Mutate 권한 제어
